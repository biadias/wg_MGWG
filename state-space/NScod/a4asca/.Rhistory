library(FLa4a)
source('../../helper_code/a4a_funs.R')
#====================================================================
# read data
#====================================================================
setwd('../')
idxs <- readFLIndices('survey.dat')
idxs <- window(idxs, end=2016)
stk <- readFLStock('index.low', no.discards = TRUE)
stk <- window(stk, end=2016, start=1983)
stk <- setPlusGroup(stk, 6)
range(stk)[c('minfbar','maxfbar')] <- c(2,4)
setwd('a4asca')
catch.n(stk)[catch.n(stk)==0] <- min(catch.n(stk)[catch.n(stk)!=0])/2
idxs <- lapply(idxs, function(x){
index(x)[index(x)==0] <- min(index(x)[index(x)!=0])/2
x
})
my <- min(unlist(lapply(lapply(idxs, range), '[', 'minyear')))
my
stk
source('algorithm.R')
q()
